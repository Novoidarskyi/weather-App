(this.webpackJsonptest=this.webpackJsonptest||[]).push([[0],{16:function(e,t,n){e.exports={title:"DetailICityWeatherCard_title__3MPQJ",list:"DetailICityWeatherCard_list__2wciH",item_text:"DetailICityWeatherCard_item_text__3j0rG"}},24:function(e,t,n){e.exports={title:"CardCityWeather_title__kahvI",item_text:"CardCityWeather_item_text__EodP-",button_wrapper:"CardCityWeather_button_wrapper__3go6j"}},34:function(e,t,n){e.exports={searchbar:"FormFindCity_searchbar__swGsl",searchForm:"FormFindCity_searchForm__1ADHz",searchFormInput:"FormFindCity_searchFormInput__32Ogo",searchFormButton:"FormFindCity_searchFormButton__1Cv2a"}},37:function(e,t,n){e.exports={container:"common_container__2UY_k",wrapper:"common_wrapper__2o607"}},42:function(e,t,n){e.exports={listCard:"ListCardCityWeather_listCard__yMZ8W",item:"ListCardCityWeather_item__veLsP"}},57:function(e,t,n){},58:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(27),i=n.n(a),s=n(22),o=n(13),u=(n(56),n(57),n(3)),l=(n(58),n(5)),d=n(18),j=(n(59),n(46)),p=n.n(j),h=n(15),b=n.n(h),f=n(23),m=n(14),O="http://api.openweathermap.org/data/2.5/weather?units=metric&lang=ru&",x="c16e47f23c97143fbd5f7a2cbadb0b2f",_=function(e){return fetch("".concat(O,"q=").concat(e,"&appid=").concat(x)).then((function(t){return t.ok?t.json():Promise.reject(new Error("\u0413\u043e\u0440\u043e\u0434 \u0441 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 ".concat(e," \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d")))}))},v=function(){var e=Object(f.a)(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map(function(){var e=Object(f.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(O,"q=").concat(t,"&appid=").concat(x));case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=3,Promise.all(n);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=Object(m.c)("cityWeather/fetchCityWeather",function(){var e=Object(f.a)(b.a.mark((function e(t,n){var r,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,_(t);case 4:return c=e.sent,e.abrupt("return",c);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",r(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()),y=Object(m.c)("cityWeather/updateWeatherOneCity",function(){var e=Object(f.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),g=Object(m.c)("cityWeather/fetchByLocalStorage",function(){var e=Object(f.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),C=function(e){return e.citiesWeather.entities},N=function(e){return e.citiesWeather.isLoading},k=function(e,t){var n=Object(r.useState)((function(){return JSON.parse(window.localStorage.getItem(e))||t})),c=Object(l.a)(n,2),a=c[0],i=c[1];return Object(r.useEffect)((function(){window.localStorage.setItem(e,JSON.stringify(a))}),[e,a]),[a,i]},F=n(34),W=n.n(F),S=n(1);var I=function(e){var t=e.onSubmit,n=Object(r.useState)(""),c=Object(l.a)(n,2),a=c[0],i=c[1],s=a.slice(0,1).toUpperCase()+a.slice(1);return Object(S.jsx)("header",{className:W.a.searchbar,children:Object(S.jsxs)("form",{className:W.a.searchForm,onSubmit:function(e){e.preventDefault(),""!==a.trim()?(t(s),i("")):d.b.info("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0433\u043e\u0440\u043e\u0434\u0430")},children:[Object(S.jsx)("input",{className:W.a.searchFormInput,type:"text",name:"cityName",autoFocus:!0,value:a,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0433\u043e\u0440\u043e\u0434\u0430",onChange:function(e){i(e.currentTarget.value)}}),Object(S.jsx)("button",{type:"submit",className:W.a.searchFormButton,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0433\u043e\u0440\u043e\u0434"})]})})},E=n(76),B=Object(m.b)("cityWeather/remove"),L=n(24),P=n.n(L);var J=function(e){var t=e.id,n=e.name,r=e.temp,c=e.feelsLike,a=e.windSpeed,i=e.description,u=Object(o.b)();return Object(S.jsxs)("div",{children:[Object(S.jsxs)(s.b,{to:"".concat(t),children:[Object(S.jsx)("h2",{className:P.a.title,children:n}),Object(S.jsxs)("p",{className:P.a.item_text,children:["\u0422\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430: ",r," \xb0C"]}),Object(S.jsxs)("p",{className:P.a.item_text,children:["\u041e\u0449\u0443\u0449\u0430\u0435\u0442\u0441\u044f \u043a\u0430\u043a: ",c," \xb0C"]}),Object(S.jsxs)("p",{className:P.a.item_text,children:["\u0412\u0435\u0442\u0435\u0440: ",a," \u043c/\u0441"]}),Object(S.jsxs)("p",{className:P.a.item_text,children:["\u0421\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u043f\u043e\u0433\u043e\u0434\u044b: ",i]})]}),Object(S.jsxs)("div",{className:P.a.button_wrapper,children:[Object(S.jsx)(E.a,{variant:"outlined",type:"button",sx:{color:"white",mr:"25px",border:"1px solid white"},onClick:function(){return u(y(n))},children:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"}),Object(S.jsx)(E.a,{variant:"outlined",type:"button",sx:{color:"white",border:"1px solid white"},onClick:function(){return u(B(t))},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})]})},D=n(42),z=n.n(D);var A=function(){var e=Object(o.c)(C);return e.length>0&&Object(S.jsx)("ul",{className:z.a.listCard,children:e.map((function(e){var t=e.id,n=e.name,r=e.main,c=e.wind,a=e.weather;return Object(S.jsx)("li",{className:z.a.item,children:Object(S.jsx)(J,{id:t,name:n,temp:r.temp,feelsLike:r.feels_like,windSpeed:c.speed,description:a[0].description})},t)}))})},H=n(37),M=n.n(H);var T=function(){var e=k("cities",[]),t=Object(l.a)(e,2),n=t[0],c=t[1],a=Object(o.c)(C),i=Object(o.c)(N),s=Object(o.b)();return Object(r.useEffect)((function(){var e=JSON.parse(window.localStorage.getItem("cities"));0!==e.length&&s(g(e))}),[s]),Object(r.useEffect)((function(){c(a.map((function(e){return e.name})))}),[a,c]),Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(d.a,{autoClose:1500}),Object(S.jsx)(I,{onSubmit:function(e){if(n.includes(e))return d.b.warning("\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u043f\u043e\u0433\u043e\u0434\u0435 \u0434\u0430\u043d\u043d\u043e\u0433\u043e \u0433\u043e\u0440\u043e\u0434\u0430 \u0443\u0436\u0435 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0430 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435");s(w(e))}}),i&&Object(S.jsx)(p.a,{color:"white",size:150,css:"\n            position: fixed;\n            top: 50%;\n            left: 50%;\n          "}),Object(S.jsx)("div",{className:M.a.container,children:Object(S.jsx)(A,{})})]})},q=n(6),G=n(16),R=n.n(G);var U=function(e){var t,n=e.city,r=n.name,c=n.visibility,a=n.weather,i=n.wind,s=i.speed,o=i.deg,u=n.main,l=u.temp,d=u.feels_like,j=u.humidity,p=u.pressure,h=u.temp_max,b=u.temp_min,f=360===(t=o)?"\u0441\u0435\u0432\u0435\u0440\u043d\u044b\u0439":0<=t&&t<90?"\u0441\u0435\u0432\u0435\u0440\u043e-\u0432\u043e\u0441\u0442\u043e\u0447\u043d\u044b\u0439":90===t?"\u0432\u043e\u0441\u0442\u043e\u0447\u043d\u044b\u0439":90<=t&&t<180?"\u044e\u0433\u043e-\u0432\u043e\u0441\u0442\u043e\u0447\u043d\u044b\u0439":180===t?"\u044e\u0436\u043d\u044b\u0439":180<=t&&t<270?"\u044e\u0433\u043e-\u0437\u0430\u043f\u0430\u0434\u043d\u044b\u0439":270===t?"\u0437\u0430\u043f\u0430\u0434\u043d\u044b\u0439":270<=t&&t<360?"\u0441\u0435\u0432\u0435\u0440\u043e-\u0437\u0430\u043f\u0430\u0434\u043d\u044b\u0439":void 0;return Object(S.jsxs)("div",{children:[Object(S.jsx)("h2",{className:R.a.title,children:r}),Object(S.jsxs)("ul",{className:R.a.list,children:[Object(S.jsxs)("li",{className:R.a.item_text,children:["\u0422\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430: ",l," \xb0C"]}),Object(S.jsxs)("li",{className:R.a.item_text,children:["\u041e\u0449\u0443\u0449\u0430\u0435\u0442\u0441\u044f \u043a\u0430\u043a: ",d," \xb0C"]}),Object(S.jsxs)("li",{className:R.a.item_text,children:["\u0412\u0435\u0442\u0435\u0440: ",s," \u043c/\u0441 (",f,")"]}),Object(S.jsxs)("li",{className:R.a.item_text,children:["\u0412\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u044c: ",j,"%"]}),Object(S.jsxs)("li",{className:R.a.item_text,children:["\u0414\u0430\u0432\u043b\u0435\u043d\u0438\u0435: ",p," \u043c\u043c \u0440\u0442. \u0441\u0442."]}),Object(S.jsxs)("li",{className:R.a.item_text,children:["\u0412\u0438\u0434\u0438\u043c\u043e\u0441\u0442\u044c: ",c," \u043c"]}),Object(S.jsxs)("li",{className:R.a.item_text,children:["\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430: ",h," \xb0C"]}),Object(S.jsxs)("li",{className:R.a.item_text,children:["\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430: ",b," \xb0C"]}),Object(S.jsxs)("li",{className:R.a.item_text,children:["\u0421\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u043f\u043e\u0433\u043e\u0434\u044b: ",a[0].description]})]})]})},Q=(n(66),n(47)),V=function(e){var t=e.value,n={labels:t.reduce((function(e,t,n){return 2===String(n).length?e.push("".concat(n,":00")):e.push("0".concat(n,":00")),e}),[]),datasets:[{data:t.map((function(e){return e.temp})),borderColor:"white",fill:!1,label:"t\xb0C",lineTension:.5,pointBorderColor:"white",pointBackgroundColor:"grey",pointRadius:7,pointHoverRadius:15,pointBorderWidth:2}]};return Object(S.jsx)(Q.a,{width:160,height:50,options:{responsive:!0,plugins:{legend:{display:!1,position:"top"},title:{display:!0,text:"\u0421\u0443\u0442\u043e\u0447\u043d\u0430\u044f \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430, \xb0C",font:{size:20},color:"white"}},scales:{xAxis:{ticks:{color:"white"},grid:{display:!1}},yAxis:{ticks:{color:"white"},grid:{display:!1}}}},data:n})},Y=function(){var e=Object(u.f)();return Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(E.a,{variant:"outlined",type:"button",sx:{color:"white",border:"1px solid white",position:"relative",top:"15px",left:"15px"},onClick:function(){e("/weather-app")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"})})};var Z=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(!0),i=Object(l.a)(a,2),s=i[0],j=i[1],p=Object(o.c)(C),h=Object(r.useState)([]),b=Object(l.a)(h,2),f=b[0],m=b[1],O=Object(u.g)().cityId;console.log(n),Object(r.useEffect)((function(){var e;0===p.length&&0===f.length&&(e=O,fetch("".concat("http://api.openweathermap.org/data/2.5/weather?units=metric&lang=ru&","id=").concat(e,"&appid=").concat(x)).then((function(e){return e.ok?e.json():Promise.reject(new Error("\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u043f\u043e\u0433\u043e\u0434\u0435 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"))}))).then((function(e){return m([e].concat(Object(q.a)(f)))})).catch((function(e){return d.b.error(e.message)}))}),[f,O,p.length]);var _=0!==p.length?p.find((function(e){return e.id===Number(O)})):f[0],v=function(e){var t=e.coord;(function(e,t){return fetch("".concat("https://api.openweathermap.org/data/2.5/onecall?units=metric&exclude=current,minutely,daily,alerts&","lat=").concat(e,"&lon=").concat(t,"&appid=").concat(x)).then((function(e){return e.ok?e.json():Promise.reject(new Error("\u0414\u0430\u043d\u043d\u044b\u0435 \u043e \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0435 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b"))}))})(t.lat,t.lon).then(c).catch((function(e){return d.b.error(e.message)}))},w=0!==n.length?n.hourly.slice(0,24):[];return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(Y,{}),Object(S.jsxs)("div",{className:M.a.wrapper,children:[_&&0!==_.length&&Object(S.jsx)(U,{city:_}),s&&Object(S.jsx)(E.a,{variant:"outlined",type:"button",sx:{color:"white",border:"1px solid white",mt:"10px"},onClick:function(){v(_),j(!s)},children:"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u044b\u0439 \u043f\u0440\u043e\u0433\u043d\u043e\u0437 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u044b (\xb0C)"})]}),!s&&Object(S.jsx)(V,{value:w})]})};var K,X,$,ee=function(){return Object(S.jsxs)(u.c,{children:[Object(S.jsx)(u.a,{exact:!0,path:"/weather-app",element:Object(S.jsx)(T,{})}),Object(S.jsx)(u.a,{path:"/weather-app/:cityId",element:Object(S.jsx)(Z,{})})]})},te=n(2),ne=n(19),re=Object(m.d)([],(K={},Object(te.a)(K,w.fulfilled,(function(e,t){return[t.payload].concat(Object(q.a)(e))})),Object(te.a)(K,y.fulfilled,(function(e,t){var n=t.payload;return e.reduce((function(e,t){return t.id!==n.id?e.push(t):e.push(n),e}),[])})),Object(te.a)(K,g.fulfilled,(function(e,t){return t.payload})),Object(te.a)(K,B,(function(e,t){var n=t.payload;return e.filter((function(e){return e.id!==n}))})),K)),ce=Object(m.d)(!1,(X={},Object(te.a)(X,w.pending,(function(){return!0})),Object(te.a)(X,w.fulfilled,(function(){return!1})),Object(te.a)(X,w.rejected,(function(){return!1})),X)),ae=Object(m.d)(null,($={},Object(te.a)($,w.rejected,(function(e,t){var n=t.payload;return d.b.error(n)})),Object(te.a)($,y.rejected,(function(e,t){return t.payload})),Object(te.a)($,g.rejected,(function(e,t){return t.payload})),$)),ie=Object(ne.b)({entities:re,isLoading:ce,error:ae}),se=Object(m.a)({reducer:{citiesWeather:ie},devTools:!1});i.a.render(Object(S.jsx)(c.a.StrictMode,{children:Object(S.jsx)(o.a,{store:se,children:Object(S.jsx)(s.a,{children:Object(S.jsx)(ee,{})})})}),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.720da597.chunk.js.map